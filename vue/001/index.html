<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue.js 运行机制全局概览 | 扎星的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.8c09bca5.css" as="style"><link rel="preload" href="/assets/js/app.68bcc21e.js" as="script"><link rel="preload" href="/assets/js/2.df3e4849.js" as="script"><link rel="preload" href="/assets/js/6.b9f5be84.js" as="script"><link rel="prefetch" href="/assets/js/10.4fa21d0c.js"><link rel="prefetch" href="/assets/js/100.a7c67571.js"><link rel="prefetch" href="/assets/js/101.1ce6d8ee.js"><link rel="prefetch" href="/assets/js/102.4fef5e7e.js"><link rel="prefetch" href="/assets/js/103.158a9ff8.js"><link rel="prefetch" href="/assets/js/104.abb10eb9.js"><link rel="prefetch" href="/assets/js/105.5fdc4925.js"><link rel="prefetch" href="/assets/js/106.b42f4dbc.js"><link rel="prefetch" href="/assets/js/107.7c64c79b.js"><link rel="prefetch" href="/assets/js/108.065bda7a.js"><link rel="prefetch" href="/assets/js/109.6ff6c8b4.js"><link rel="prefetch" href="/assets/js/11.8c76a1bf.js"><link rel="prefetch" href="/assets/js/110.5031e466.js"><link rel="prefetch" href="/assets/js/111.c62a65c6.js"><link rel="prefetch" href="/assets/js/112.fe19b95a.js"><link rel="prefetch" href="/assets/js/113.8c1b858c.js"><link rel="prefetch" href="/assets/js/114.f7082016.js"><link rel="prefetch" href="/assets/js/115.05c28e87.js"><link rel="prefetch" href="/assets/js/116.aae9e290.js"><link rel="prefetch" href="/assets/js/117.80ee2176.js"><link rel="prefetch" href="/assets/js/118.478b97d1.js"><link rel="prefetch" href="/assets/js/119.7e651dde.js"><link rel="prefetch" href="/assets/js/12.0fe079dd.js"><link rel="prefetch" href="/assets/js/120.8917b0a2.js"><link rel="prefetch" href="/assets/js/121.f81b04eb.js"><link rel="prefetch" href="/assets/js/122.3b92d0e6.js"><link rel="prefetch" href="/assets/js/123.901faf89.js"><link rel="prefetch" href="/assets/js/13.aa6c0f0b.js"><link rel="prefetch" href="/assets/js/14.6cd57988.js"><link rel="prefetch" href="/assets/js/15.cbd6c92e.js"><link rel="prefetch" href="/assets/js/16.ce5b7f5e.js"><link rel="prefetch" href="/assets/js/17.77028844.js"><link rel="prefetch" href="/assets/js/18.900f2272.js"><link rel="prefetch" href="/assets/js/19.6bdd95eb.js"><link rel="prefetch" href="/assets/js/20.1d092af7.js"><link rel="prefetch" href="/assets/js/21.8b6e0eae.js"><link rel="prefetch" href="/assets/js/22.4f313d8a.js"><link rel="prefetch" href="/assets/js/23.c1a9a180.js"><link rel="prefetch" href="/assets/js/24.47c045fe.js"><link rel="prefetch" href="/assets/js/25.fb2c18c6.js"><link rel="prefetch" href="/assets/js/26.58af4147.js"><link rel="prefetch" href="/assets/js/27.49ad2c7b.js"><link rel="prefetch" href="/assets/js/28.6586a2a9.js"><link rel="prefetch" href="/assets/js/29.38405dba.js"><link rel="prefetch" href="/assets/js/3.718626c9.js"><link rel="prefetch" href="/assets/js/30.7f0d22d8.js"><link rel="prefetch" href="/assets/js/31.63280a59.js"><link rel="prefetch" href="/assets/js/32.c3a00710.js"><link rel="prefetch" href="/assets/js/33.5cd6d28a.js"><link rel="prefetch" href="/assets/js/34.5fb6be8b.js"><link rel="prefetch" href="/assets/js/35.31c6b0e4.js"><link rel="prefetch" href="/assets/js/36.44832f43.js"><link rel="prefetch" href="/assets/js/37.0d0e163f.js"><link rel="prefetch" href="/assets/js/38.eb0daf3f.js"><link rel="prefetch" href="/assets/js/39.dc48dc9c.js"><link rel="prefetch" href="/assets/js/4.dc0b9889.js"><link rel="prefetch" href="/assets/js/40.274b3aaf.js"><link rel="prefetch" href="/assets/js/41.f23c843f.js"><link rel="prefetch" href="/assets/js/42.9d7c4e81.js"><link rel="prefetch" href="/assets/js/43.62fde47e.js"><link rel="prefetch" href="/assets/js/44.f219cc85.js"><link rel="prefetch" href="/assets/js/45.ff5f4257.js"><link rel="prefetch" href="/assets/js/46.cd087c62.js"><link rel="prefetch" href="/assets/js/47.976408d6.js"><link rel="prefetch" href="/assets/js/48.32d1676e.js"><link rel="prefetch" href="/assets/js/49.f10f00cc.js"><link rel="prefetch" href="/assets/js/5.a372d006.js"><link rel="prefetch" href="/assets/js/50.6e2ae914.js"><link rel="prefetch" href="/assets/js/51.e608ad23.js"><link rel="prefetch" href="/assets/js/52.0d85cc42.js"><link rel="prefetch" href="/assets/js/53.e84a148a.js"><link rel="prefetch" href="/assets/js/54.7b3a2cf5.js"><link rel="prefetch" href="/assets/js/55.8dab2075.js"><link rel="prefetch" href="/assets/js/56.ba6abf70.js"><link rel="prefetch" href="/assets/js/57.ac0ae7af.js"><link rel="prefetch" href="/assets/js/58.ad2bc8e9.js"><link rel="prefetch" href="/assets/js/59.407b1d32.js"><link rel="prefetch" href="/assets/js/60.eb0640b0.js"><link rel="prefetch" href="/assets/js/61.208195c0.js"><link rel="prefetch" href="/assets/js/62.78df72ec.js"><link rel="prefetch" href="/assets/js/63.34fb985b.js"><link rel="prefetch" href="/assets/js/64.6493e093.js"><link rel="prefetch" href="/assets/js/65.4a3dcc42.js"><link rel="prefetch" href="/assets/js/66.5de6b57e.js"><link rel="prefetch" href="/assets/js/67.24bade72.js"><link rel="prefetch" href="/assets/js/68.2248a782.js"><link rel="prefetch" href="/assets/js/69.24e6542e.js"><link rel="prefetch" href="/assets/js/7.12962e86.js"><link rel="prefetch" href="/assets/js/70.cf80b6cd.js"><link rel="prefetch" href="/assets/js/71.08631771.js"><link rel="prefetch" href="/assets/js/72.460992a6.js"><link rel="prefetch" href="/assets/js/73.4d0c13f1.js"><link rel="prefetch" href="/assets/js/74.c1a08907.js"><link rel="prefetch" href="/assets/js/75.644a7a6d.js"><link rel="prefetch" href="/assets/js/76.286d685f.js"><link rel="prefetch" href="/assets/js/77.201dda5d.js"><link rel="prefetch" href="/assets/js/78.7ad2fea8.js"><link rel="prefetch" href="/assets/js/79.51b5b503.js"><link rel="prefetch" href="/assets/js/8.791cc050.js"><link rel="prefetch" href="/assets/js/80.3013288f.js"><link rel="prefetch" href="/assets/js/81.c1429b0d.js"><link rel="prefetch" href="/assets/js/82.2418f558.js"><link rel="prefetch" href="/assets/js/83.83768632.js"><link rel="prefetch" href="/assets/js/84.b7a28c02.js"><link rel="prefetch" href="/assets/js/85.e36b7c1a.js"><link rel="prefetch" href="/assets/js/86.a0409766.js"><link rel="prefetch" href="/assets/js/87.74c389b7.js"><link rel="prefetch" href="/assets/js/88.42297d4a.js"><link rel="prefetch" href="/assets/js/89.e652a303.js"><link rel="prefetch" href="/assets/js/9.142b36f8.js"><link rel="prefetch" href="/assets/js/90.3083df1b.js"><link rel="prefetch" href="/assets/js/91.940264f1.js"><link rel="prefetch" href="/assets/js/92.84f64336.js"><link rel="prefetch" href="/assets/js/93.80519c0b.js"><link rel="prefetch" href="/assets/js/94.ef254a74.js"><link rel="prefetch" href="/assets/js/95.45aeaf31.js"><link rel="prefetch" href="/assets/js/96.c3814197.js"><link rel="prefetch" href="/assets/js/97.4b92b66f.js"><link rel="prefetch" href="/assets/js/98.a907ea9d.js"><link rel="prefetch" href="/assets/js/99.f2c0dde8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c09bca5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">扎星的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS数组</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS编程练习题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS常见设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS高阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6新特性</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>V8引擎</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>异步I/O和异步编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TCP协议</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTTP协议</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue/001/" aria-current="page" class="active sidebar-link">Vue.js 运行机制全局概览</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/001/#初始化以及挂载" class="sidebar-link">初始化以及挂载</a></li><li class="sidebar-sub-header"><a href="/vue/001/#编译" class="sidebar-link">编译</a></li><li class="sidebar-sub-header"><a href="/vue/001/#响应式" class="sidebar-link">响应式</a></li><li class="sidebar-sub-header"><a href="/vue/001/#virtual-dom" class="sidebar-link">Virtual DOM</a></li><li class="sidebar-sub-header"><a href="/vue/001/#更新视图" class="sidebar-link">更新视图</a></li></ul></li><li><a href="/vue/002/" class="sidebar-link">响应式系统的基本原理</a></li><li><a href="/vue/003/" class="sidebar-link">响应式系统的依赖收集追踪原理</a></li><li><a href="/vue/004/" class="sidebar-link">实现 Virtual DOM 下的一个 VNode 节点</a></li><li><a href="/vue/005/" class="sidebar-link">template 模板是怎样通过 Compile 编译的</a></li><li><a href="/vue/006/" class="sidebar-link">数据状态更新时的差异 diff 及 patch 机制</a></li><li><a href="/vue/007/" class="sidebar-link">批量异步更新策略及 nextTick 原理</a></li><li><a href="/vue/008/" class="sidebar-link">Vuex 状态管理的工作原理</a></li><li><a href="/vue/009/" class="sidebar-link">Vue3 Diff算法</a></li><li><a href="/vue/010/" class="sidebar-link">Vue3 响应式原理</a></li><li><a href="/vue/011/" class="sidebar-link">Vue2/3 响应式对数组的处理</a></li><li><a href="/vue/012/" class="sidebar-link">012 手写 Vuex 核心原理</a></li><li><a href="/vue/013/" class="sidebar-link">013 v-model 语法糖</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue-js-运行机制全局概览"><a href="#vue-js-运行机制全局概览" class="header-anchor">#</a> Vue.js 运行机制全局概览</h1> <p>Vue 运行的内部流程图</p> <p><img src="/assets/img/1.8a0793c8.jpg" alt="1"></p> <h2 id="初始化以及挂载"><a href="#初始化以及挂载" class="header-anchor">#</a> 初始化以及挂载</h2> <p><img src="data:image/jpeg;base64,UklGRuoiAABXRUJQVlA4WAoAAAAgAAAAOwMATwEASUNDUDAPAAAAAA8wYXBwbAIQAABtbnRyUkdCIFhZWiAH4QABAAEACQA0AC9hY3NwQVBQTAAAAABBUFBMAAAAAAAAAAAAAAAAAAAAAAAA9tYAAQAAAADTLWFwcGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFkZXNjAAABUAAAAGJkc2NtAAABtAAABBhjcHJ0AAAFzAAAACN3dHB0AAAF8AAAABRyWFlaAAAGBAAAABRnWFlaAAAGGAAAABRiWFlaAAAGLAAAABRyVFJDAAAGQAAACAxhYXJnAAAOTAAAACB2Y2d0AAAObAAAADBuZGluAAAOnAAAAD5jaGFkAAAO3AAAACxtbW9kAAAPCAAAAChiVFJDAAAGQAAACAxnVFJDAAAGQAAACAxhYWJnAAAOTAAAACBhYWdnAAAOTAAAACBkZXNjAAAAAAAAAAhEaXNwbGF5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbWx1YwAAAAAAAAAiAAAADGhySFIAAAAUAAABqGtvS1IAAAAMAAABvG5iTk8AAAASAAAByGlkAAAAAAASAAAB2mh1SFUAAAAUAAAB7GNzQ1oAAAAWAAACAGRhREsAAAAcAAACFnVrVUEAAAAcAAACMmFyAAAAAAAUAAACTml0SVQAAAAUAAACYnJvUk8AAAASAAACdm5sTkwAAAAWAAACiGhlSUwAAAAWAAACnmVzRVMAAAASAAACdmZpRkkAAAAQAAACtHpoVFcAAAAMAAACxHZpVk4AAAAOAAAC0HNrU0sAAAAWAAAC3npoQ04AAAAMAAACxHJ1UlUAAAAkAAAC9GZyRlIAAAAWAAADGG1zAAAAAAASAAADLmNhRVMAAAAYAAADQHRoVEgAAAAMAAADWGVzWEwAAAASAAACdmRlREUAAAAQAAADZGVuVVMAAAASAAADdHB0QlIAAAAYAAADhnBsUEwAAAASAAADnmVsR1IAAAAiAAADsHN2U0UAAAAQAAAD0nRyVFIAAAAUAAAD4mphSlAAAAAMAAAD9nB0UFQAAAAWAAAEAgBMAEMARAAgAHUAIABiAG8AagBpzuy37AAgAEwAQwBEAEYAYQByAGcAZQAtAEwAQwBEAEwAQwBEACAAVwBhAHIAbgBhAFMAegDtAG4AZQBzACAATABDAEQAQgBhAHIAZQB2AG4A/QAgAEwAQwBEAEwAQwBEAC0AZgBhAHIAdgBlAHMAawDmAHIAbQQaBD4EOwRMBD4EQAQ+BDIEOAQ5ACAATABDAEQgDwBMAEMARAAgBkUGRAZIBkYGKQBMAEMARAAgAGMAbwBsAG8AcgBpAEwAQwBEACAAYwBvAGwAbwByAEsAbABlAHUAcgBlAG4ALQBMAEMARCAPAEwAQwBEACAF5gXRBeIF1QXgBdkAVgDkAHIAaQAtAEwAQwBEX2mCcgAgAEwAQwBEAEwAQwBEACAATQDgAHUARgBhAHIAZQBiAG4A6QAgAEwAQwBEBCYEMgQ1BEIEPQQ+BDkAIAQWBBoALQQ0BDgEQQQ/BDsENQQ5AEwAQwBEACAAYwBvAHUAbABlAHUAcgBXAGEAcgBuAGEAIABMAEMARABMAEMARAAgAGUAbgAgAGMAbwBsAG8AcgBMAEMARAAgDioONQBGAGEAcgBiAC0ATABDAEQAQwBvAGwAbwByACAATABDAEQATABDAEQAIABDAG8AbABvAHIAaQBkAG8ASwBvAGwAbwByACAATABDAEQDiAOzA8cDwQPJA7wDtwAgA78DuAPMA70DtwAgAEwAQwBEAEYA5AByAGcALQBMAEMARABSAGUAbgBrAGwAaQAgAEwAQwBEMKsw6TD8AEwAQwBEAEwAQwBEACAAYQAgAEMAbwByAGUAc3RleHQAAAAAQ29weXJpZ2h0IEFwcGxlIEluYy4sIDIwMTcAAFhZWiAAAAAAAADzFgABAAAAARbKWFlaIAAAAAAAAHHAAAA5igAAAWdYWVogAAAAAAAAYSMAALnmAAAT9lhZWiAAAAAAAAAj8gAADJAAAL3QY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA2ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKMAqACtALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGa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" alt="2"></p> <p>在 new Vue() 之后。 Vue 会调用 _init 函数进行初始化，也就是这里的 init 过程，它会初始化生命周期、事件、 props、 methods、 data、 computed 与 watch 等。其中最重要的是通过 Object.defineProperty 设置 setter 与 getter 函数，用来实现「响应式」以及「依赖收集」，后面会详细讲到，这里只要有一个印象即可。</p> <p>初始化之后调用 $mount 会挂载组件，如果是运行时编译，即不存在 render function 但是存在 template 的情况，需要进行「编译」步骤。</p> <h2 id="编译"><a href="#编译" class="header-anchor">#</a> 编译</h2> <p>compile编译可以分成 parse、optimize 与 generate 三个阶段，最终需要得到 render function。</p> <p><img src="/assets/img/3.048577a7.jpg" alt="3"></p> <h3 id="parse"><a href="#parse" class="header-anchor">#</a> parse</h3> <p>parse 会用正则等方式解析 template 模板中的指令、class、style等数据，形成AST。</p> <h3 id="optimize"><a href="#optimize" class="header-anchor">#</a> optimize</h3> <p>optimize 的主要作用是标记 static 静态节点，这是 Vue 在编译过程中的一处优化，后面当 update 更新界面时，会有一个 patch 的过程， diff 算法会直接跳过静态节点，从而减少了比较的过程，优化了 patch 的性能。</p> <h3 id="generate"><a href="#generate" class="header-anchor">#</a> generate</h3> <p>generate 是将 AST 转化成 render function 字符串的过程，得到结果是 render 的字符串以及 staticRenderFns 字符串。</p> <p>在经历过 parse、optimize 与 generate 这三个阶段以后，组件中就会存在渲染 VNode 所需的 render function 了。</p> <h2 id="响应式"><a href="#响应式" class="header-anchor">#</a> 响应式</h2> <p>接下来也就是 Vue.js 响应式核心部分。</p> <p><img src="/assets/img/4.e368f6a8.jpg" alt="4"></p> <p>这里的 getter 跟 setter 已经在之前介绍过了，在 init 的时候通过 Object.defineProperty 进行了绑定，它使得当被设置的对象被读取的时候会执行 getter 函数，而在当被赋值的时候会执行 setter 函数。</p> <p>当 render function 被渲染的时候，因为会读取所需对象的值，所以会触发 getter 函数进行「依赖收集」，「依赖收集」的目的是将观察者 Watcher 对象存放到当前闭包中的订阅者 Dep 的 subs 中。形成如下所示的这样一个关系。</p> <p><img src="data:image/jpeg;base64,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" alt="5"></p> <p>在修改对象的值的时候，会触发对应的 setter， setter 通知之前「依赖收集」得到的 Dep 中的每一个 Watcher，告诉它们自己的值改变了，需要重新渲染视图。这时候这些 Watcher 就会开始调用 update 来更新视图，当然这中间还有一个 patch 的过程以及使用队列来异步更新的策略，这个我们后面再讲。</p> <h2 id="virtual-dom"><a href="#virtual-dom" class="header-anchor">#</a> Virtual DOM</h2> <p>我们知道，render function 会被转化成 VNode 节点。Virtual DOM 其实就是一棵以 JavaScript 对象（ VNode 节点）作为基础的树，用对象属性来描述节点，实际上它只是一层对真实 DOM 的抽象。最终可以通过一系列操作使这棵树映射到真实环境上。由于 Virtual DOM 是以 JavaScript 对象为基础而不依赖真实平台环境，所以使它具有了跨平台的能力，比如说浏览器平台、Weex、Node 等。</p> <p>比如说下面这样一个例子：</p> <div class="language- extra-class"><pre class="language-text"><code>{
    tag: 'div',                 /*说明这是一个div标签*/
    children: [                 /*存放该标签的子节点*/
        {
            tag: 'a',           /*说明这是一个a标签*/
            text: 'click me'    /*标签的内容*/
        }
    ]
}
</code></pre></div><p>渲染后可以得到</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>click me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这只是一个简单的例子，实际上的节点有更多的属性来标志节点，比如 isStatic （代表是否为静态节点）、 isComment （代表是否为注释节点）等。</p> <h2 id="更新视图"><a href="#更新视图" class="header-anchor">#</a> 更新视图</h2> <p><img src="data:image/jpeg;base64,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" alt="6"></p> <p>前面我们说到，在修改一个对象值的时候，会通过 setter -&gt; Watcher -&gt; update 的流程来修改对应的视图，那么最终是如何更新视图的呢？</p> <p>当数据变化后，执行 render function 就可以得到一个新的 VNode 节点，我们如果想要得到新的视图，最简单粗暴的方法就是直接解析这个新的 VNode 节点，然后用 innerHTML 直接全部渲染到真实 DOM 中。但是其实我们只对其中的一小块内容进行了修改，这样做似乎有些「浪费」。</p> <p>那么我们为什么不能只修改那些「改变了的地方」呢？这个时候就要介绍我们的「patch」了。我们会将新的 VNode 与旧的 VNode 一起传入 patch 进行比较，经过 diff 算法得出它们的「差异」。最后我们只需要将这些「差异」的对应 DOM 进行修改即可。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/networkprotocol/http/013/" class="prev">
        HTTP2
      </a></span> <span class="next"><a href="/vue/002/">
        响应式系统的基本原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.68bcc21e.js" defer></script><script src="/assets/js/2.df3e4849.js" defer></script><script src="/assets/js/6.b9f5be84.js" defer></script>
  </body>
</html>
