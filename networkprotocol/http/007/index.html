<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>对于定长和不定长的数据，HTTP 是怎么传输的? | 扎星的博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.b0fbd704.css" as="style"><link rel="preload" href="/assets/js/app.7faaeb90.js" as="script"><link rel="preload" href="/assets/js/2.4ceac094.js" as="script"><link rel="preload" href="/assets/js/1.06e97743.js" as="script"><link rel="preload" href="/assets/js/25.59ab9b92.js" as="script"><link rel="prefetch" href="/assets/js/10.4d67db37.js"><link rel="prefetch" href="/assets/js/100.9ada27ad.js"><link rel="prefetch" href="/assets/js/101.7eccfd40.js"><link rel="prefetch" href="/assets/js/102.e344b695.js"><link rel="prefetch" href="/assets/js/103.b91c2e2b.js"><link rel="prefetch" href="/assets/js/104.6f90f799.js"><link rel="prefetch" href="/assets/js/105.73780a6e.js"><link rel="prefetch" href="/assets/js/106.e8737813.js"><link rel="prefetch" href="/assets/js/107.5f785c2c.js"><link rel="prefetch" href="/assets/js/108.74958d5b.js"><link rel="prefetch" href="/assets/js/109.d3005515.js"><link rel="prefetch" href="/assets/js/11.32340e89.js"><link rel="prefetch" href="/assets/js/110.65860f7f.js"><link rel="prefetch" href="/assets/js/111.d91c32b6.js"><link rel="prefetch" href="/assets/js/112.a5e8efc2.js"><link rel="prefetch" href="/assets/js/113.191ff9e1.js"><link rel="prefetch" href="/assets/js/114.eb21d1d8.js"><link rel="prefetch" href="/assets/js/115.ed058567.js"><link rel="prefetch" href="/assets/js/116.c73d4a79.js"><link rel="prefetch" href="/assets/js/117.c1195019.js"><link rel="prefetch" href="/assets/js/118.b2aeca16.js"><link rel="prefetch" href="/assets/js/119.666dc6c6.js"><link rel="prefetch" href="/assets/js/12.f3209147.js"><link rel="prefetch" href="/assets/js/120.548bb39a.js"><link rel="prefetch" href="/assets/js/121.d6368bb6.js"><link rel="prefetch" href="/assets/js/122.14d59fae.js"><link rel="prefetch" href="/assets/js/123.7e5e4cc0.js"><link rel="prefetch" href="/assets/js/124.a9c9fc37.js"><link rel="prefetch" href="/assets/js/125.2de4a8c4.js"><link rel="prefetch" href="/assets/js/126.6d029a58.js"><link rel="prefetch" href="/assets/js/127.3f37c3d9.js"><link rel="prefetch" href="/assets/js/128.3bab5bc7.js"><link rel="prefetch" href="/assets/js/129.fde4fcbb.js"><link rel="prefetch" href="/assets/js/13.ff905545.js"><link rel="prefetch" href="/assets/js/130.21002715.js"><link rel="prefetch" href="/assets/js/131.e261ff32.js"><link rel="prefetch" href="/assets/js/132.f4df11c1.js"><link rel="prefetch" href="/assets/js/133.3082ed5c.js"><link rel="prefetch" href="/assets/js/134.f583893d.js"><link rel="prefetch" href="/assets/js/135.4930a3bf.js"><link rel="prefetch" href="/assets/js/136.088fe073.js"><link rel="prefetch" href="/assets/js/137.3b78020c.js"><link rel="prefetch" href="/assets/js/138.19b200da.js"><link rel="prefetch" href="/assets/js/139.890d6075.js"><link rel="prefetch" href="/assets/js/14.c3568dfc.js"><link rel="prefetch" href="/assets/js/140.5b795da9.js"><link rel="prefetch" href="/assets/js/141.15c2c5e7.js"><link rel="prefetch" href="/assets/js/142.c336f1c2.js"><link rel="prefetch" href="/assets/js/143.0eba62e9.js"><link rel="prefetch" href="/assets/js/144.556773e6.js"><link rel="prefetch" href="/assets/js/15.7af482c3.js"><link rel="prefetch" href="/assets/js/16.1add91f2.js"><link rel="prefetch" href="/assets/js/17.5211db13.js"><link rel="prefetch" href="/assets/js/18.cb58294e.js"><link rel="prefetch" href="/assets/js/19.3f4c86e4.js"><link rel="prefetch" href="/assets/js/20.f6e9413a.js"><link rel="prefetch" href="/assets/js/21.d3127fc5.js"><link rel="prefetch" href="/assets/js/22.75a3675d.js"><link rel="prefetch" href="/assets/js/23.4cc8500e.js"><link rel="prefetch" href="/assets/js/24.6e9f6fde.js"><link rel="prefetch" href="/assets/js/26.b6ea8fe3.js"><link rel="prefetch" href="/assets/js/27.eb622419.js"><link rel="prefetch" href="/assets/js/28.82216df1.js"><link rel="prefetch" href="/assets/js/29.aca5231f.js"><link rel="prefetch" href="/assets/js/3.cc8f990c.js"><link rel="prefetch" href="/assets/js/30.b0c74906.js"><link rel="prefetch" href="/assets/js/31.41b824b5.js"><link rel="prefetch" href="/assets/js/32.95d89f8c.js"><link rel="prefetch" href="/assets/js/33.7387a515.js"><link rel="prefetch" href="/assets/js/34.3fa9be34.js"><link rel="prefetch" href="/assets/js/35.905a5d0a.js"><link rel="prefetch" href="/assets/js/36.d7ce4b9a.js"><link rel="prefetch" href="/assets/js/37.fd8aaeb0.js"><link rel="prefetch" href="/assets/js/38.b36232f9.js"><link rel="prefetch" href="/assets/js/39.ae371aa8.js"><link rel="prefetch" href="/assets/js/4.b6f813b6.js"><link rel="prefetch" href="/assets/js/40.9e77645d.js"><link rel="prefetch" href="/assets/js/41.7aced1a6.js"><link rel="prefetch" href="/assets/js/42.3431685d.js"><link rel="prefetch" href="/assets/js/43.3c61b623.js"><link rel="prefetch" href="/assets/js/44.74706cc8.js"><link rel="prefetch" href="/assets/js/45.6deb7af6.js"><link rel="prefetch" href="/assets/js/46.51a84a36.js"><link rel="prefetch" href="/assets/js/47.446a6488.js"><link rel="prefetch" href="/assets/js/48.eeb843b8.js"><link rel="prefetch" href="/assets/js/49.f35e84a6.js"><link rel="prefetch" href="/assets/js/5.6c42c548.js"><link rel="prefetch" href="/assets/js/50.39dc3799.js"><link rel="prefetch" href="/assets/js/51.2e98eda6.js"><link rel="prefetch" href="/assets/js/52.0ebf3a07.js"><link rel="prefetch" href="/assets/js/53.7fbd54a4.js"><link rel="prefetch" href="/assets/js/54.42c54b92.js"><link rel="prefetch" href="/assets/js/55.1c372827.js"><link rel="prefetch" href="/assets/js/56.3db642d3.js"><link rel="prefetch" href="/assets/js/57.385f3c0e.js"><link rel="prefetch" href="/assets/js/58.fcb950f6.js"><link rel="prefetch" href="/assets/js/59.b77c39f3.js"><link rel="prefetch" href="/assets/js/6.249f79ed.js"><link rel="prefetch" href="/assets/js/60.4e20518b.js"><link rel="prefetch" href="/assets/js/61.86f57283.js"><link rel="prefetch" href="/assets/js/62.a4fe965c.js"><link rel="prefetch" href="/assets/js/63.c5dbf72b.js"><link rel="prefetch" href="/assets/js/64.f9242d96.js"><link rel="prefetch" href="/assets/js/65.63c88e9b.js"><link rel="prefetch" href="/assets/js/66.fa97a8fa.js"><link rel="prefetch" href="/assets/js/67.9de0f89d.js"><link rel="prefetch" href="/assets/js/68.3959d250.js"><link rel="prefetch" href="/assets/js/69.8d33bb82.js"><link rel="prefetch" href="/assets/js/7.965b9c14.js"><link rel="prefetch" href="/assets/js/70.eae11422.js"><link rel="prefetch" href="/assets/js/71.9dcc9639.js"><link rel="prefetch" href="/assets/js/72.d9858851.js"><link rel="prefetch" href="/assets/js/73.1f5d46fd.js"><link rel="prefetch" href="/assets/js/74.55cfc98d.js"><link rel="prefetch" href="/assets/js/75.1c8f9b5f.js"><link rel="prefetch" href="/assets/js/76.9712797a.js"><link rel="prefetch" href="/assets/js/77.fc4c4708.js"><link rel="prefetch" href="/assets/js/78.9e58022f.js"><link rel="prefetch" href="/assets/js/79.8958c264.js"><link rel="prefetch" href="/assets/js/80.25f206a9.js"><link rel="prefetch" href="/assets/js/81.82b297fd.js"><link rel="prefetch" href="/assets/js/82.95a92348.js"><link rel="prefetch" href="/assets/js/83.1d856c8a.js"><link rel="prefetch" href="/assets/js/84.2fe27c01.js"><link rel="prefetch" href="/assets/js/85.119d769d.js"><link rel="prefetch" href="/assets/js/86.dda9549d.js"><link rel="prefetch" href="/assets/js/87.5f96db0f.js"><link rel="prefetch" href="/assets/js/88.09fc8a79.js"><link rel="prefetch" href="/assets/js/89.86b4ddcb.js"><link rel="prefetch" href="/assets/js/90.85df2a8a.js"><link rel="prefetch" href="/assets/js/91.593d62b4.js"><link rel="prefetch" href="/assets/js/92.1f4f1612.js"><link rel="prefetch" href="/assets/js/93.3cf32b8f.js"><link rel="prefetch" href="/assets/js/94.ddb588cb.js"><link rel="prefetch" href="/assets/js/95.850c9613.js"><link rel="prefetch" href="/assets/js/96.5e20d25c.js"><link rel="prefetch" href="/assets/js/97.41935f73.js"><link rel="prefetch" href="/assets/js/98.9c3b2db4.js"><link rel="prefetch" href="/assets/js/99.6c498302.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.4849e3bc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b0fbd704.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">扎星的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS数组</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS编程练习题</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS常见设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS高阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES6新特性</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器安全</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>V8引擎</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>异步I/O和异步编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TCP协议</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>HTTP协议</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/networkprotocol/http/001/" class="sidebar-link">http 的报文结构</a></li><li><a href="/networkprotocol/http/002/" class="sidebar-link">http 的请求方法</a></li><li><a href="/networkprotocol/http/003/" class="sidebar-link">如何理解 URI</a></li><li><a href="/networkprotocol/http/004/" class="sidebar-link">http 状态码</a></li><li><a href="/networkprotocol/http/005/" class="sidebar-link">http 协议有哪些特点和缺点</a></li><li><a href="/networkprotocol/http/006/" class="sidebar-link">accept 系列字段解析</a></li><li><a href="/networkprotocol/http/007/" aria-current="page" class="active sidebar-link">对于定长和不定长的数据，HTTP 是怎么传输的？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/networkprotocol/http/007/#定长包体" class="sidebar-link">定长包体</a></li><li class="sidebar-sub-header"><a href="/networkprotocol/http/007/#不定长包体" class="sidebar-link">不定长包体</a></li></ul></li><li><a href="/networkprotocol/http/008/" class="sidebar-link">HTTP 如何处理大文件的传输？</a></li><li><a href="/networkprotocol/http/009/" class="sidebar-link">HTTP 中如何处理表单数据的提交？</a></li><li><a href="/networkprotocol/http/010/" class="sidebar-link">HTTP1.1 如何解决 HTTP 的队头阻塞问题？</a></li><li><a href="/networkprotocol/http/011/" class="sidebar-link">如何理解 HTTP 代理？</a></li><li><a href="/networkprotocol/http/012/" class="sidebar-link">HTTPS 和 TLS</a></li><li><a href="/networkprotocol/http/013/" class="sidebar-link">HTTP2</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nodejs</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="对于定长和不定长的数据-http-是怎么传输的"><a href="#对于定长和不定长的数据-http-是怎么传输的" class="header-anchor">#</a> 对于定长和不定长的数据，HTTP 是怎么传输的?</h1> <h2 id="定长包体"><a href="#定长包体" class="header-anchor">#</a> 定长包体</h2> <p>对于定长包体而言，发送端在传输的时候一般会带上 Content-Length, 来指明包体的长度。</p> <p>我们用一个nodejs服务器来模拟一下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Length'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;helloworld&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8081</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功启动&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>启动后访问: localhost:8081。</p> <p>浏览器中显示如下:</p> <div class="language- extra-class"><pre class="language-text"><code>helloworld
</code></pre></div><p>这是长度正确的情况，那不正确的情况是如何处理的呢？</p> <p>我们试着把这个长度设置的小一些:</p> <div class="language-js extra-class"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Length'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>重启服务，再次访问，现在浏览器中内容如下:</p> <div class="language- extra-class"><pre class="language-text"><code>hellowor
</code></pre></div><p>那后面的ld哪里去了呢？实际上在 http 的响应体中直接被截去了。</p> <p>然后我们试着将这个长度设置得大一些:</p> <div class="language-js extra-class"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Length'</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>此时浏览器会显示：</p> <p><img src="data:image/jpeg;base64,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" alt="1"></p> <p>直接无法显示了。可以看到Content-Length对于 http 传输过程起到了十分关键的作用，如果设置不当可以直接导致传输失败。</p> <h2 id="不定长包体"><a href="#不定长包体" class="header-anchor">#</a> 不定长包体</h2> <p>上述是针对于定长包体，那么对于不定长包体而言是如何传输的呢？</p> <p>这里就必须介绍另外一个 http 头部字段了:</p> <div class="language- extra-class"><pre class="language-text"><code>Transfer-Encoding: chunked
</code></pre></div><p>表示分块传输数据，设置这个字段后会自动产生两个效果:</p> <ul><li>Content-Length 字段会被忽略</li> <li>基于长连接持续推送动态内容</li></ul> <p>我们依然以一个实际的例子来模拟分块传输，nodejs 程序如下:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html; charset=utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Length'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Transfer-Encoding'</span><span class="token punctuation">,</span> <span class="token string">'chunked'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p&gt;来啦&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;第一次传输&lt;br/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;第二次传输&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8009</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功启动&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>访问效果入下:</p> <p><img src="data:image/gif;base64,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HQQNtIQNjc04PxnKiPZmE63sYSs3ehSq/i6rI23GV8eanmBOADFfkLgAMLfZbq6gCP95AASwusFqXEcISahr3nY4ihcVQbWv3dMzalurGFwKDItw7CKoIAccHOEE193ud8cb3enOt773ze9++/vfAA+4wAdO8IIb/OAIT7jCF87whjv84SLhgMQnTvGKW/ziGM+4xjfO8Y57/OMgD7nI/kdO8pFD/OQoT7nKV87ylrv85TCPucxnTvOa2/zmOM+5znd+8wo0lSEVIMBLkfpznjvQ5w0JOnRrY3QELjWWQick4Dgs9GE+oKpNN+AL/iIQpE+zASawOgmQrvSsN1ACXEc6IQkQ9mk+YOyz7dsDNCkCsxtQAjhFOt4N/XayV93uRy8638feVKVvPeyHBzwAK+DcWCKAkITncAAE4IEH1L3siicg4wNQ94JAPuhzr/re9575Afrc5xEggef7Xviq+xypnS89AFnG4QLAfvB+N+oAOMB12fuPkD9XOwSKLnWiUv3JmPf9/hgfe69Lvu6QH0jySa98/U3p1s53u+C7/l4ArmK9+v3LvqU1BP7ym//86E+/+tfP/va7//3wj7/850//+tv//vjPv/73z//++///ABiAAjiABFiABniACJiACriADNiADviAEBiBEjiBFFiBFniBGJiBGriBHNiBHviBIBiCIjiCJFiCJniCKJiCKriCLNiCLviCMBiDMjiDNFiDNniDOJiDOriDPNiDPviDQBiEQjiERFiERniESJiESriETNiETviEUBiFUjiFVFiFVniFWJiFWriFXNiFXviFYBiGYjiGZFiGZniGaJiGariGbNiGbviGcBiHcjiHdFiHdniHeJiHeriHfNiHfviHgBiIgjiIhFiIhniIEYiYiIq4iIzYiI74iJC4bwEBACH5BAFmAAAALAAAbwBRAA8AhzLNMgAAAMb//+emUlKm56Xj/8aCAP//xgCCxv//5//jpef//wBVpaVVAITH///HhIQAAFIAhAAAhIQAUgAAUoQAhFIAAKVVUlIAUlJVpYSCUsaChOf/xgBVUqXj51JVAMbHhP/j5wCChITH56XjxlKmpYSmpaWCAFJVUgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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" alt="001"></p> <p>用 telnet 抓到的响应如下:</p> <p><img src="/assets/img/2.50270323.jpg" alt="2"></p> <p>注意，Connection: keep-alive及之前的为响应行和响应头，后面的内容为响应体，这两部分用换行符隔开。</p> <p>响应体的结构比较有意思，如下所示:</p> <div class="language- extra-class"><pre class="language-text"><code>chunk长度(16进制的数)
第一个chunk的内容
chunk长度(16进制的数)
第二个chunk的内容
......
0

</code></pre></div><p>最后是留有有一个空行的，这一点请大家注意。</p> <p>以上便是 http 对于定长数据和不定长数据的传输方式。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/networkprotocol/http/006/" class="prev">
        accept 系列字段解析
      </a></span> <span class="next"><a href="/networkprotocol/http/008/">
        HTTP 如何处理大文件的传输？
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7faaeb90.js" defer></script><script src="/assets/js/2.4ceac094.js" defer></script><script src="/assets/js/1.06e97743.js" defer></script><script src="/assets/js/25.59ab9b92.js" defer></script>
  </body>
</html>
